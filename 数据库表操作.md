[toc]

# 创建和管理表


## 标识符命名规则


- 数据库名、表名不能超过30个字符，变量名限制为 29 个；
- 必须只能包含 `A~Z`、`a~z`、`0~9` 共 63 个字符;
- 数据库名、表名、字段名等对象名中间不能包含空格;
- 同一个 mysql 软件中，数据库不能重名，同一个数据库中表名不能重复，同一个表中字段名不能重复;
- 必须保证字段没有和保留字、数据库系统或常用方法冲突，如果坚持要使用，需要在sql 语句中使用 ` 着重号包裹;
- 保持字段名和类型的一致，在命名字段，并为其指定数据类型的时候一定要保证一致性；


## mysql 中的数据类型

| 类型 | 类型举例 |
| -- | -- |
| 整数类型 | `TINYINT`、`SMALLINT`、`MEDIUMINT`、`INT 或 INTEGER`、`BIGINT` |
| 浮点类型 | `FLOAT`、`DOUBLE` |
| 定点数类型 | `DECIMAL` |
| 位类型 | `BIT` |
| 日期时间类型 | `YEAR`、`TIME`、`DATE`、`DATETIME`、`TIMESTAMP` |
| 文本字符串类型 | `CHAR`、`VARCHAR`、`TINYTEXT`、`TEXT`、`MEDIUMINT`、`LONGTEXT` |
| 枚举类型 | `ENUM` |
| 集合类型 | `SET` |
| 二进制字符串类型 | `BINARY`、`VARBINARY`、`TINYBLOB`、`BLOB`、`MEDIUEBLOB`、`LONGBLOB` |
| JSON类型 | JSON对象、JSON数组 |
| 空间数据类型 | 单值: `GEOMETRY`、`POINT`、`LINESTRING`、`POLYGON` <br/> 集合: `MULTIPOINT`、`MULTILINESTRING`、`MULTIPOLYGON`、`GEOMETRYCOLLECTION` |


常用的数据类型如下:

| 数据类型 | 描述 |
| -- | -- |
| `INT` | 从 `-2^31 ~ 2^31 -1` 区间的整型数据。存储大小位 4 字节; |
| `CHAR(size)` | 定长字符数据。若未指定，默认为 1 个字符，最大长度 255 ; |
| `VARCHAR(size)` | 可变长字符数据，根据字符串实际长度保存，必须指定长度; |
| `FLOAT(M, D)` | 单精度，占用 4 字节。</br> M: 总的位数(整数位+小数位) </br> D: 小数位，例如 FLOAT(7, 4) 表示总位数可以有7位，其中4位在小数点后。</br> D<=M<=255，0<=D<=30，默认 M+D<=6 |
| `DOUBLE(M, D)` | 双精度，占用 8 字节。</br> D<=M<=255，0<=D<=30，默认 M+D<=15 |
| `DECIMAL(M, D)` | 高精度小数，占用 M+2 个字节。 </br> D<=M<=65，0<=D<=30，最大取值范围与 `DOUBLE` 相同。 |
| `DATE` | 日期类型数据，格式 `YYYY-MM-DD` |
| `BLOB` | 二进制形式的长文本数据，最大可达 4G; |
| `TEXT` | 长文本数据，最大可达 4G; |


# 创建和管理数据库

## 创建数据库

```sql
# 方式1
CREATE DATABASE 数据库名称;

# 方式2 创建数据库并指定字符集
CREATE DATABASE 数据库名 CHARACTER SET 字符集;

# 方式3 判断数据库是否存在，不存在则创建
CREATE DATABASE IF NOT EXISTS 数据库名;
```

## 使用数据库

1. 查看当前所有的数据库

```sql
SHOW DATABASES;
```

2. 查看当前使用的数据库

```sql
SELECT DATABASE();
```

3. 查看指定数据库下的所有表

```sql
SHOW TABLES() FROM 数据库名;

# 如果是查看当前选定的数据库，可以省略 FROM 子句
SHOW TABLES();
```

4. 查看数据库的创建信息

```sql
SHOW CREATE DATABASE 数据库名;

或

SHOW CREATE DATABASE 数据库名\G;
```

5. 使用/切换数据库

```sql
USE 数据库名;
```

## 修改数据库


修改数据库字符集
   
```sql
# 字符集 GBK、UTF-8 等
ALTER DATABASE 数据库名 CHARACTER SET 字符集;
```


## 删除数据库

```sql
# 删除指定数据库
DROP DATABASE 数据库名;

# 删除指定数据库
DROP DATABASE IF EXISTS 数据库名;
```

# 创建表

## 创建表

```sql
CREATE TABLE [IF NOT EXISTS] 表名(
    字段1 数据类型 [约束条件] [默认值],
    字段2 数据类型 [约束条件] [默认值],
    字段3 数据类型 [约束条件] [默认值],
    ...
    [表约束条件]
)
```

`IF NOT EXISTS` 关键字，表示 如果数据库中已经存在了对应的表，则忽略建表语句，不再重复创建表。如果数据库中没有对应的表，则创建对应的表;

建表 case

```sql
create table if not exists 
emp(
    # int 类型
    emp_id int, 
    # 最多保存 20 个中英文字符
    emp_name varchar(20), 
    # 总位数不超过15位
    salary double, 
    # 日期类型
    birthday date
    );

desc emp;
+----------+-------------+------+-----+---------+-------+
| Field    | Type        | Null | Key | Default | Extra |
+----------+-------------+------+-----+---------+-------+
| emp_id   | int         | YES  |     | NULL    |       |
| emp_name | varchar(20) | YES  |     | NULL    |       |
| salary   | double      | YES  |     | NULL    |       |
| birthday | date        | YES  |     | NULL    |       |
+----------+-------------+------+-----+---------+-------+
4 rows in set (0.00 sec)
```


